# =============================================
# Hyprland 快捷键配置文件
# 存放路径：~/.config/hypr/keybindings.conf
# =============================================

# ----------------------------
# 1. 基础设置
# ----------------------------
# 主修饰键 (Windows键/Mac Command键)
$mainMod = SUPER
$terminal = kitty
# $terminal = foot
$fileManager = dolphin
$menu = rofi -show drun
# $menu = wofi --show drun

# ----------------------------
# 2. 应用程序控制
# ----------------------------
# 启动常用程序
bind = $mainMod, Q, exec, $terminal            # 打开终端
bind = $mainMod, E, exec, $fileManager         # 打开文件管理器
bind = Ctrl+Space, exec, $menu                 # 打开应用启动器
bind = $mainMod, R, exec, $menu -run-shell-command '{terminal} -e ${SHELL} -ic "{cmd} && read"

# 窗口操作
bind = $mainMod, C, killactive                 # 关闭当前窗口
bind = $mainMod+Shift+Alt, Q, exec, hyprctl kill  # 强制关闭崩溃的窗口
bind = $mainMod, F, togglefloating             # 切换浮动/平铺状态
bind = $mainMod+Alt, F, fullscreen, 0          # 切换全屏状态
bind = $mainMod+Shift, F, pseudo               # 切换伪浮动状态
bind = $mainMod, P, pin                        # 将窗口固定到所有工作区

# 切换窗口
bind = Alt, Tab, cyclenext
bind = Alt, Tab, bringactivetotop,

# 鼠标控制窗口（保留与键盘操作的重复绑定）
bindm = $mainMod, mouse:272, movewindow        # 按住Super+左键拖动窗口
bindm = $mainMod, mouse:273, resizewindow      # 按住Super+右键调整窗口大小

# ----------------------------
# 3. 窗口布局控制
# ----------------------------
# 分屏操作
bind = $mainMod, J, togglesplit                # 切换水平/垂直分屏
binde = $mainMod, Semicolon, splitratio, -0.1  # 缩小主区域10%
binde = $mainMod, Apostrophe, splitratio, +0.1 # 扩大主区域10%
bind = Ctrl+$mainMod, Backslash, resizeactive, exact 640 480  # 重置窗口为640x480

# 窗口移动
bind = Super+Shift, Left, movewindow, l # [hidden]
bind = Super+Shift, Right, movewindow, r # [hidden]
bind = Super+Shift, Up, movewindow, u # [hidden]
bind = Super+Shift, Down, movewindow, d # [hidden]

# 窗口焦点控制（保留所有导航方式）
bind = $mainMod, left, movefocus, l            # 向左移动焦点
bind = $mainMod, right, movefocus, r           # 向右移动焦点
bind = $mainMod, up, movefocus, u              # 向上移动焦点
bind = $mainMod, down, movefocus, d            # 向下移动焦点
bind = $mainMod, BracketLeft, movefocus, l     # 为60%键盘保留的备用键
bind = $mainMod, BracketRight, movefocus, r    # 为60%键盘保留的备用键

# ----------------------------
# 4. 工作区管理（完整保留所有导航方式）
# ----------------------------
# 数字键切换工作区 (1-10)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# 移动窗口到工作区 (Shift+数字键)
bind = $mainMod+Shift, 1, movetoworkspace, 1
bind = $mainMod+Shift, 2, movetoworkspace, 2
bind = $mainMod+Shift, 3, movetoworkspace, 3
bind = $mainMod+Shift, 4, movetoworkspace, 4
bind = $mainMod+Shift, 5, movetoworkspace, 5
bind = $mainMod+Shift, 6, movetoworkspace, 6
bind = $mainMod+Shift, 7, movetoworkspace, 7
bind = $mainMod+Shift, 8, movetoworkspace, 8
bind = $mainMod+Shift, 9, movetoworkspace, 9
bind = $mainMod+Shift, 0, movetoworkspace, 10
bind = $mainMod+Shift, N, exec, ~/.config/hypr/scripts/newws.sh

# 特殊工作区（类似"Scratchpad"）
bind = $mainMod, S, togglespecialworkspace, magic      # 显示/隐藏特殊工作区
bind = $mainMod+Shift, S, movetoworkspace, special:magic  # 移动窗口到特殊工作区

# 工作区导航（保留所有键盘+鼠标方式）
bind = $mainMod, Page_Down, workspace, +1      # 键盘：下一页工作区
bind = $mainMod, Page_Up, workspace, -1        # 键盘：上一页工作区
bind = $mainMod, mouse_down, workspace, e-1    # 鼠标滚轮向下：下一页
bind = $mainMod, mouse_up, workspace, e+1      # 鼠标滚轮向上：上一页

# ----------------------------
# 5. 多媒体控制
# ----------------------------
# 音量控制
# bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
# bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
# bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# 亮度控制
# bindel = , XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
# bindel = , XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# 媒体播放控制
# bindl = , XF86AudioNext, exec, playerctl next
# bindl = , XF86AudioPrev, exec, playerctl previous
# bindl = , XF86AudioPlay, exec, playerctl play-pause

# ----------------------------
# 6. 实用工具快捷键
# ----------------------------
# 截图&录屏（全屏）
bind = $mainMod+Shift, Print, /home/arch/.config/waybar/scripts/record/record.sh screenshot
bind = $mainMod+Shift, R, /home/arch/.config/waybar/scripts/record/record.sh record
# 截图工具
# bind = $mainMod+Shift, S, exec, pidof slurp || hyprshot --freeze --clipboard-only --mode region --silent  # 区域截图到剪贴板
# bind = $mainMod+Shift+Alt, S, exec, pidof slurp || grim -g "$(slurp)" - | swappy -f -  # 区域截图并编辑
# bind = , Print, exec, grim - | wl-copy  # 全屏截图到剪贴板
# bind = Ctrl+Print, exec, mkdir -p $(xdg-user-dir PICTURES)/Screenshots && grim $(xdg-user-dir PICTURES)/Screenshots/Screenshot_"$(date '+%Y-%m-%d_%H.%M.%S')".png  # 全屏截图保存文件
# # 区域截图
# bind = $mainMod+Shift, S, exec, killall slurp 2>/dev/null; hyprshot --freeze --clipboard-only --mode region --silent  # 区域截图到剪贴板
# bind = $mainMod+Shift+Alt, S, exec, killall slurp 2>/dev/null; grim -g "$(slurp)" - | swappy -f -  # 区域截图并编辑
# # 全屏截图
# bind = , Print, exec, grim - | wl-copy  # 全屏截图到剪贴板
# bind = Ctrl+Print, exec, mkdir -p $(xdg-user-dir PICTURES)/Screenshots && grim $(xdg-user-dir PICTURES)/Screenshots/Screenshot_"$(date '+%Y-%m-%d_%H.%M.%S')".png  # 全屏截图保存文件

# 录屏工具
# bind = $mainMod+Alt, R, exec, ~/.config/hypr/scripts/record.sh  # 区域录屏（无声）
# bind = Ctrl+Alt, R, exec, ~/.config/hypr/scripts/record.sh --fullscreen  # 全屏录屏（无声）
# bind = $mainMod+Shift+Alt, R, exec, ~/.config/hypr/scripts/record.sh --fullscreen-sound  # 全屏录屏（带声音）

# 其他工具
bind = $mainMod+Shift, C, exec, hyprpicker -a  # 取色器
bind = $mainMod, V, exec, qs ipc call TEST_ALIVE || pkill fuzzel || cliphist list | fuzzel --match-mode fzf --dmenu | cliphist decode | wl-copy  # 剪贴板历史

# ----------------------------
# 7. 系统控制
# ----------------------------
# Waybar 控制
bind = $mainMod, O, exec, waybar               # 启动Waybar
bind = $mainMod+Shift, O, exec, killall waybar && waybar  # 重启Waybar

# 退出Hyprland
bind = $mainMod, M, exit                       # 退出Hyprland会话