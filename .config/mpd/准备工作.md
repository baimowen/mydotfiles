```bash
mkdir -p ~/Music
mkdir -p ~/.config/mpd/playlists
touch ~/.config/mpd/{database,log,state}
chmod 600 ~/.config/mpd/{database,state}
chown -R $USER:$USER ~/.config/mpd
chmod 755 ~/.config/mpd

mpd --no-daemon --stdout --verbose ~/.config/mpd/mpd.conf ^C
systemctl --user restart mpd
systemctl status mpd
```



```bash
sudo pacman -S --noconfirm pulseaudio  # 音频后端
pulseaudio --check || pulseaudio --start
mkfifo /tmp/mpd.fifo && chmod 666 /tmp/mpd.fifo  # 音频可视化管道
```



在zprofie添加

```bash
if ! pgrep -u $USER pulseaudio > /dev/null; then
    pulseaudio --start
fi
# [[ ! -p /tmp/mpd.fifo ]] && (rm -f /tmp/mpd.fifo && mkfifo /tmp/mpd.fifo && chmod 666 /tmp/mpd.fifo)
```





调整音量

```bash
# 启动音频系统 pulseaudio(传统)或pipewire
systemctl --user enable --now pipewire pipewire-pulse wireplumber
systemctl --user enable --now pulseaudio

# 调节音频后端音量(puleaudio)
pactl list sinks | grep -A 15 "State:"  # 查看默认输出设备状态
pactl set-sink-mute @DEFAULT_SINK@ 0  # 取消静音
pactl set-sink-volume @DEFAULT_SINK@ 100%  # 调整到最大音量
```





>   [!warning]
>
>   开机自启使用 systemctl --user enable mpd，用户级别，否则会报错 `mpd error: no database` 原因是root下无 `.config/mpd` 目录
